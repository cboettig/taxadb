<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A High-Performance Local Taxonomic Database Interface â€¢ taxadb</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A High-Performance Local Taxonomic Database Interface">
<meta property="og:description" content="Creates a local database of many commonly used taxonomic authorities
             and provides functions that can quickly query this data.  ">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">taxadb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/articles/backends.html">Backends for taxadb</a>
    </li>
    <li>
      <a href="articles/articles/data-sources.html">Name Providers and schema used in taxadb</a>
    </li>
    <li>
      <a href="articles/articles/intro.html">Tutorial for taxadb</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cboettig/taxadb">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="taxadb" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#taxadb" class="anchor"></a>taxadb <img src="reference/figures/logo.svg" align="right" alt="" width="120">
</h1></div>

<p>The goal of <code>taxadb</code> is to provide <em>fast</em>, <em>consistent</em> access to taxonomic data, supporting common tasks such as resolving taxonomic names to identifiers, looking up higher classification ranks of given species, or returning a list of all species below a given rank. These tasks are particularly common when synthesizing data across large species assemblies, such as combining occurrence records with trait records.</p>
<p>Existing approaches to these problems typically rely on web APIs, which can make them impractical for work with large numbers of species or in more complex pipelines. Queries and returned formats also differ across the different taxonomic authorities, making tasks that query multiple authorities particularly complex. <code>taxadb</code> creates a <em>local</em> database of most readily available taxonomic authorities, each of which is transformed into consistent, standard, and researcher-friendly tabular formats.</p>
<div id="install-and-initial-setup" class="section level2">
<h2 class="hasAnchor">
<a href="#install-and-initial-setup" class="anchor"></a>Install and initial setup</h2>
<p>To get started, install the development version directly from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"cboettig/taxadb"</span>)</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(taxadb)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr) <span class="co"># Used to illustrate how a typical workflow combines nicely with `dplyr`</span></a></code></pre></div>
<p>Create a local copy of the Catalogue of Life (2018) database:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="reference/td_create.html">td_create</a></span>(<span class="st">"col"</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; not overwriting dwc_col</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; not overwriting common_col</span></a></code></pre></div>
<p>Read in the species list used by the Breeding Bird Survey:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">bbs_species_list &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata/bbs.tsv"</span>, <span class="dt">package=</span><span class="st">"taxadb"</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">bbs &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/read.table.html">read.delim</a></span>(bbs_species_list)</a></code></pre></div>
</div>
<div id="getting-names-and-ids" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-names-and-ids" class="anchor"></a>Getting names and ids</h2>
<p>Two core functions are <code><a href="reference/get_ids.html">get_ids()</a></code> and <code><a href="reference/get_names.html">get_names()</a></code>. These functions take a vector of names or ids (respectively), and return a vector of ids or names (respectively). For instance, we can use this to attempt to resolve all the bird names in the Breeding Bird Survey against the Catalogue of Life:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">birds &lt;-<span class="st"> </span>bbs <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span>(species) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span>(<span class="dt">id =</span> <span class="kw"><a href="reference/get_ids.html">get_ids</a></span>(species, <span class="st">"col"</span>))</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(birds, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;                          species           id</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; 1         Dendrocygna autumnalis         &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; 2            Dendrocygna bicolor COL:35517332</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; 3                Anser canagicus COL:35517329</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; 4             Anser caerulescens COL:35517325</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; 5  Chen caerulescens (blue form)         &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; 6                   Anser rossii COL:35517328</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 7                Anser albifrons         &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; 8                Branta bernicla COL:35517301</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; 9      Branta bernicla nigricans COL:35537100</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; 10             Branta hutchinsii COL:35536445</span></a></code></pre></div>
<p>Note that some names cannot be resolved to an identifier. This can occur because of miss-spellings, non-standard formatting, or the use of a synonym not recognized by the naming provider. Names that cannot be uniquely resolved because they are known synonyms of multiple different species will also return <code>NA</code>. The <code>by_name</code> filtering functions can help us resolve this last case (see below).</p>
<p><code><a href="reference/get_ids.html">get_ids()</a></code> returns the IDs of accepted names, that is <code>dwc:AcceptedNameUsageID</code>s. We can resolve the IDs into accepted names:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">birds <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span>(<span class="dt">accepted_name =</span> <span class="kw"><a href="reference/get_names.html">get_names</a></span>(id, <span class="st">"col"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>()</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;                         species           id       accepted_name</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; 1        Dendrocygna autumnalis         &lt;NA&gt;                &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; 2           Dendrocygna bicolor COL:35517332 Dendrocygna bicolor</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; 3               Anser canagicus COL:35517329       Chen canagica</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 4            Anser caerulescens COL:35517325   Chen caerulescens</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; 5 Chen caerulescens (blue form)         &lt;NA&gt;                &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; 6                  Anser rossii COL:35517328         Chen rossii</span></a></code></pre></div>
<p>This illustrates that some of our names, e.g. <em>Dendrocygna bicolor</em> are accepted in the Catalogue of Life, while others, <em>Anser canagicus</em> are <strong>known synonyms</strong> of a different accepted name: <strong>Chen canagica</strong>. Resolving synonyms and accepted names to identifiers helps us avoid the possible miss-matches we could have when the same species is known by two different names.</p>
</div>
<div id="taxonomic-data-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#taxonomic-data-tables" class="anchor"></a>Taxonomic Data Tables</h2>
<p>Local access to taxonomic data tables lets us do much more than look up names and ids. A family of <code>by_*</code> functions in <code>taxadb</code> help us work directly with subsets of the taxonomic data. As we noted above, this can be useful in resolving certain ambiguous names.</p>
<p>For instance, <em>Trochalopteron henrici gucenense</em> does not resolve to an identifier in ITIS:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="reference/get_ids.html">get_ids</a></span>(<span class="st">"Trochalopteron henrici gucenense"</span>) </a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; [1] NA</span></a></code></pre></div>
<p>Using <code><a href="reference/by_name.html">by_name()</a></code>, we find this is because the name resolves not to zero matches, but to more than one match:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="reference/by_name.html">by_name</a></span>(<span class="st">"Trochalopteron henrici gucenense"</span>) </a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 17</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt;    sort taxonID scientificName taxonRank acceptedNameUsaâ€¦ taxonomicStatus</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;          </span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt; 1     1 &lt;NA&gt;    &lt;NA&gt;           &lt;NA&gt;      &lt;NA&gt;             &lt;NA&gt;           </span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; # â€¦ with 11 more variables: update_date &lt;chr&gt;, kingdom &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; #   phylum &lt;chr&gt;, class &lt;chr&gt;, order &lt;chr&gt;, family &lt;chr&gt;, genus &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; #   specificEpithet &lt;chr&gt;, vernacularName &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; #   infraspecificEpithet &lt;chr&gt;, input &lt;chr&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="reference/by_name.html">by_name</a></span>(<span class="st">"Trochalopteron henrici gucenense"</span>)  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span>(<span class="dt">acceptedNameUsage =</span> <span class="kw"><a href="reference/get_names.html">get_names</a></span>(acceptedNameUsageID)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span>(scientificName, taxonomicStatus, acceptedNameUsage, acceptedNameUsageID)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt; # A tibble: 1 x 4</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt;   scientificName taxonomicStatus acceptedNameUsage acceptedNameUsageID</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;             &lt;chr&gt;              </span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; 1 &lt;NA&gt;           &lt;NA&gt;            &lt;NA&gt;              &lt;NA&gt;</span></a></code></pre></div>
<p>Similar functions <code>by_id</code>, <code>by_rank</code>, and <code>by_common</code> take IDs, scientific ranks, or common names, respectively. Here, we can get taxonomic data on all bird names in the Catalogue of Life:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="reference/by_rank.html">by_rank</a></span>(<span class="dt">name =</span> <span class="st">"Aves"</span>, <span class="dt">rank =</span> <span class="st">"class"</span>, <span class="dt">provider =</span> <span class="st">"col"</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; # A tibble: 32,327 x 21</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt;     sort taxonID scientificName acceptedNameUsaâ€¦ taxonomicStatus taxonRank</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;          &lt;chr&gt;            &lt;chr&gt;           &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt;  1     1 COL:35â€¦ Struthio cameâ€¦ COL:35516814     accepted        species  </span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt;  2     1 COL:35â€¦ Rhea americana COL:35516815     accepted        species  </span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt;  3     1 COL:35â€¦ Dromaius novaâ€¦ COL:35516817     accepted        species  </span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt;  4     1 COL:35â€¦ Casuarius benâ€¦ COL:35516818     accepted        species  </span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt;  5     1 COL:35â€¦ Casuarius unaâ€¦ COL:35516819     accepted        species  </span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;  6     1 COL:35â€¦ Apteryx austrâ€¦ COL:35516820     accepted        species  </span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt;  7     1 COL:35â€¦ Tinamus guttaâ€¦ COL:35516823     accepted        species  </span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt;  8     1 COL:35â€¦ Tinamus major  COL:35516824     accepted        species  </span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt;  9     1 COL:35â€¦ Tinamus osgooâ€¦ COL:35516825     accepted        species  </span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt; 10     1 COL:35â€¦ Tinamus solitâ€¦ COL:35516826     accepted        species  </span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt; # â€¦ with 32,317 more rows, and 15 more variables: kingdom &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">#&gt; #   phylum &lt;chr&gt;, class &lt;chr&gt;, order &lt;chr&gt;, family &lt;chr&gt;, genus &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">#&gt; #   specificEpithet &lt;chr&gt;, infraspecificEpithet &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"><span class="co">#&gt; #   taxonConceptID &lt;chr&gt;, isExtinct &lt;chr&gt;, nameAccordingTo &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="co">#&gt; #   namePublishedIn &lt;chr&gt;, scientificNameAuthorship &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="co">#&gt; #   vernacularName &lt;chr&gt;, input &lt;chr&gt;</span></a></code></pre></div>
<p>Combining these with <code>dplyr</code> functions can make it easy to explore this data: for instance, which families have the most species?</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="reference/by_rank.html">by_rank</a></span>(<span class="dt">name =</span> <span class="st">"Aves"</span>, <span class="dt">rank =</span> <span class="st">"class"</span>, <span class="dt">provider =</span> <span class="st">"col"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/filter.html">filter</a></span>(taxonomicStatus <span class="op">==</span><span class="st"> "accepted"</span>, taxonRank<span class="op">==</span><span class="st">"species"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/group_by.html">group_by</a></span>(family) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/tally.html">count</a></span>(<span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>()</a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt; # A tibble: 6 x 2</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt; # Groups:   family [6]</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt;   family           n</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt;   &lt;chr&gt;        &lt;int&gt;</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt; 1 Tyrannidae     402</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; 2 Psittacidae    377</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt; 3 Thraupidae     374</span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">#&gt; 4 Trochilidae    339</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">#&gt; 5 Columbidae     323</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co">#&gt; 6 Muscicapidae   317</span></a></code></pre></div>
</div>
<div id="using-the-database-connection-directly" class="section level2">
<h2 class="hasAnchor">
<a href="#using-the-database-connection-directly" class="anchor"></a>Using the database connection directly</h2>
<p><code>by_*</code> functions by default return in-memory data frames. Because they are filtering functions, they return a subset of the full data which matches a given query (names, ids, ranks, etc), so the returned data.frames are smaller than the full record of a naming provider. Working directly with the SQL connection to the MonetDBLite database gives us access to all the data. The <code><a href="reference/taxa_tbl.html">taxa_tbl()</a></code> function provides this connection:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="reference/taxa_tbl.html">taxa_tbl</a></span>(<span class="st">"col"</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; # Source:   table&lt;dwc_col&gt; [?? x 19]</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; # Database: MonetDBEmbeddedConnection</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt;    taxonID scientificName acceptedNameUsaâ€¦ taxonomicStatus taxonRank</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;          &lt;chr&gt;            &lt;chr&gt;           &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt;  1 COL:31â€¦ Limacoccus brâ€¦ COL:316423       accepted        species  </span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt;  2 COL:31â€¦ Coccus bromelâ€¦ COL:316424       accepted        species  </span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt;  3 COL:31â€¦ Apiomorpha poâ€¦ COL:316425       accepted        species  </span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt;  4 COL:31â€¦ Eriococcus châ€¦ COL:316441       accepted        species  </span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt;  5 COL:31â€¦ Eriococcus châ€¦ COL:316442       accepted        species  </span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt;  6 COL:31â€¦ Eriococcus châ€¦ COL:316443       accepted        species  </span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt;  7 COL:31â€¦ Eriococcus ciâ€¦ COL:316444       accepted        species  </span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt;  8 COL:31â€¦ Eriococcus ciâ€¦ COL:316445       accepted        species  </span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt;  9 COL:31â€¦ Eriococcus buâ€¦ COL:316447       accepted        species  </span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt; 10 COL:31â€¦ Eriococcus auâ€¦ COL:316450       accepted        species  </span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt; # â€¦ with more rows, and 14 more variables: kingdom &lt;chr&gt;, phylum &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt; #   class &lt;chr&gt;, order &lt;chr&gt;, family &lt;chr&gt;, genus &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt; #   specificEpithet &lt;chr&gt;, infraspecificEpithet &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">#&gt; #   taxonConceptID &lt;chr&gt;, isExtinct &lt;chr&gt;, nameAccordingTo &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">#&gt; #   namePublishedIn &lt;chr&gt;, scientificNameAuthorship &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co">#&gt; #   vernacularName &lt;chr&gt;</span></a></code></pre></div>
<p>We can still use most familiar <code>dplyr</code> verbs to perform common tasks. For instance: which species has the most known synonyms?</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">most_synonyms &lt;-<span class="st"> </span><span class="kw"><a href="reference/taxa_tbl.html">taxa_tbl</a></span>(<span class="st">"col"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/group_by.html">group_by</a></span>(acceptedNameUsageID) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/tally.html">count</a></span>(<span class="dt">sort=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">most_synonyms</a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; # Source:     lazy query [?? x 2]</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; # Database:   MonetDBEmbeddedConnection</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt; # Groups:     acceptedNameUsageID</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt; # Ordered by: desc(n)</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt;    acceptedNameUsageID     n</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt;    &lt;chr&gt;               &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt;  1 COL:43082445          456</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt;  2 COL:43081989          373</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt;  3 COL:43124375          329</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt;  4 COL:43353659          328</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt;  5 COL:43223150          322</span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">#&gt;  6 COL:43337824          307</span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">#&gt;  7 COL:43124158          302</span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="co">#&gt;  8 COL:43081973          296</span></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="co">#&gt;  9 COL:43333057          253</span></a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="co">#&gt; 10 COL:23162697          252</span></a>
<a class="sourceLine" id="cb13-21" data-line-number="21"><span class="co">#&gt; # â€¦ with more rows</span></a></code></pre></div>
<p>However, unlike the <code>by_*</code> functions which return convenient in-memory tables, this is still a remote connection. This means that direct access using the <code><a href="reference/taxa_tbl.html">taxa_tbl()</a></code> function (or directly accessing the database connection using <code><a href="reference/td_connect.html">td_connect()</a></code>) is more low-level and requires greater care. For instance, we cannot just add a <code>%&gt;% mutate(acceptedNameUsage = get_names(acceptedNameUsageID))</code> to the above, because <code>get_names</code> does not work on a remote collection. Instead, we would first need to use a <code><a href="https://rdrr.io/pkg/dplyr/man/compute.html">collect()</a></code> to pull the summary table into memory. Users familiar with remote databases in <code>dplyr</code> will find using <code><a href="reference/taxa_tbl.html">taxa_tbl()</a></code> directly to be convenient and fast, while other users may find the <code>by_*</code> approach to be more intuitive.</p>
<p>So which species had those 456 names?</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">most_synonyms <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/pull.html">pull</a></span>(acceptedNameUsageID) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/by_id.html">by_id</a></span>(<span class="st">"col"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span>(scientificName)</a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt;   scientificName                     </span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt;   &lt;chr&gt;                              </span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">#&gt; 1 Mentha longifolia subsp. longifolia</span></a></code></pre></div>
</div>
<div id="learn-more" class="section level2">
<h2 class="hasAnchor">
<a href="#learn-more" class="anchor"></a>Learn more</h2>
<ul>
<li><p>See richer examples the package <a href="https://cboettig.github.io/taxadb/articles/intro.html">Tutorial</a>.</p></li>
<li><p>Learn about the underlying data sources and formats in <a href="https://cboettig.github.io/taxadb/articles/articles/data-sources.html">Data Sources</a></p></li>
<li><p>Get better performance by selecting an alternative <a href="https://cboettig.github.io/taxadb/articles/articles/backends.html">database backend</a> engines.</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/cboettig/taxadb">https://â€‹github.com/â€‹cboettig/â€‹taxadb</a>
</li>
<li>Report a bug at <br><a href="https://github.com/cboettig/taxadb/issues">https://â€‹github.com/â€‹cboettig/â€‹taxadb/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Carl Boettiger <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1642-628X" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li>Kari Norman <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-2029-2325" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li>Jorrit Poelen <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-3138-4118" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li>Scott Chamberlain <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-1444-9135" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.org/cboettig/taxadb"><img src="https://travis-ci.org/cboettig/taxadb.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/cboettig/taxadb"><img src="https://ci.appveyor.com/api/projects/status/github/cboettig/taxadb?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/github/cboettig/taxadb?branch=master"><img src="https://codecov.io/gh/cboettig/taxadb/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://cran.r-project.org/package=taxadb"><img src="https://www.r-pkg.org/badges/version/taxadb" alt="CRAN status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Carl Boettiger, Kari Norman, Jorrit Poelen, Scott Chamberlain.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
